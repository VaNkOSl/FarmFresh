@model List<FarmFresh.ViewModels.Order.OrderListViewModel>

@{
	ViewData["Title"] = "Order List";
}

<h2 class="text-center my-4">Order List</h2>

@if (Model == null || !Model.Any())
{
	<div class="alert alert-warning text-center" role="alert">
		<strong>No orders found.</strong>
	</div>
}
else
{
	<div class="table-responsive">
		<table class="table table-hover align-middle shadow-sm">
			<thead class="table-primary">
				<tr>
					<th>Order ID</th>
					<th>Product Name</th>
					<th>Order Status</th>
					<th>Price</th>
					<th>Quantity</th>
					<th>Total</th>
					<th>Photo</th>
					<th>Details</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var order in Model)
				{
					<tr>
						<td>@order.OrderId</td>
						<td>@order.ProductName</td>
						<td>
							<span class="badge bg-@(
							order.OrderStatus switch
    {
        "Completed" => "success",
        "Shipped" => "info",
        "ReadyForPickup" => "primary",
        "Canceled" => "danger",
        _ => "secondary" 
    })">
								@order.OrderStatus
							</span>
						</td>
						<td>@order.Price.ToString("C")</td> 
						<td>@order.Quantity</td>
						<td>@(order.Price * order.Quantity)</td> 
						<td>
							<img src="@(order.Picture != null
                                ? $"data:image/jpeg;base64,{Convert.ToBase64String(order.Picture)}"
                                : "/images/Placeholder.png")"
								 alt="Product Image" class="img-thumbnail" style="max-width: 100px; max-height: 100px;" />
						</td>
						<td>
							<a asp-action="Details" asp-route-id="@order.Id" class="btn btn-outline-primary btn-sm">
								<i class="bi bi-eye"></i> View Details
							</a>
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
}
